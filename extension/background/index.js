"use strict";var ee=Object.create;var S=Object.defineProperty;var te=Object.getOwnPropertyDescriptor;var re=Object.getOwnPropertyNames;var ne=Object.getPrototypeOf,oe=Object.prototype.hasOwnProperty;var ie=(a,l)=>()=>(l||a((l={exports:{}}).exports,l),l.exports);var ae=(a,l,f,e)=>{if(l&&typeof l=="object"||typeof l=="function")for(let t of re(l))!oe.call(a,t)&&t!==f&&S(a,t,{get:()=>l[t],enumerable:!(e=te(l,t))||e.enumerable});return a};var se=(a,l,f)=>(f=a!=null?ee(ne(a)):{},ae(l||!a||!a.__esModule?S(f,"default",{value:a,enumerable:!0}):f,a));var V=ie((ue,g)=>{var T,P,x,A,E,R,H,U,I,m,O,q,F,M,v,$,D,G,C,J,B,L,k,N,b;(function(a){var l=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(e){a(f(l,f(e)))}):typeof g=="object"&&typeof g.exports=="object"?a(f(l,f(g.exports))):a(f(l));function f(e,t){return e!==l&&(typeof Object.create=="function"?Object.defineProperty(e,"__esModule",{value:!0}):e.__esModule=!0),function(r,n){return e[r]=t?t(r,n):n}}})(function(a){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])};T=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");l(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},P=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},x=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},A=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},E=function(e,t){return function(r,n){t(r,n,e)}},R=function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},H=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function u(_){try{c(n.next(_))}catch(h){s(h)}}function y(_){try{c(n.throw(_))}catch(h){s(h)}}function c(_){_.done?o(_.value):i(_.value).then(u,y)}c((n=n.apply(e,t||[])).next())})},U=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(c){return function(_){return y([c,_])}}function y(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(_){c=[6,_],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},I=function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&b(t,e,r)},b=Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]},m=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},O=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},q=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(O(arguments[t]));return e},F=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],s=0,u=o.length;s<u;s++,i++)n[i]=o[s];return n},M=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},v=function(e){return this instanceof v?(this.v=e,this):new v(e)},$=function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(d){n[d]&&(i[d]=function(p){return new Promise(function(j,Z){o.push([d,p,j,Z])>1||u(d,p)})})}function u(d,p){try{y(n[d](p))}catch(j){h(o[0][3],j)}}function y(d){d.value instanceof v?Promise.resolve(d.value.v).then(c,_):h(o[0][2],d)}function c(d){u("next",d)}function _(d){u("throw",d)}function h(d,p){d(p),o.shift(),o.length&&u(o[0][0],o[0][1])}},D=function(e){var t,r;return t={},n("next"),n("throw",function(i){throw i}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(i,o){t[i]=e[i]?function(s){return(r=!r)?{value:v(e[i](s)),done:i==="return"}:o?o(s):s}:o}},G=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof m=="function"?m(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=e[o]&&function(s){return new Promise(function(u,y){s=e[o](s),i(u,y,s.done,s.value)})}}function i(o,s,u,y){Promise.resolve(y).then(function(c){o({value:c,done:u})},s)}},C=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};var f=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};J=function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&b(t,e,r);return f(t,e),t},B=function(e){return e&&e.__esModule?e:{default:e}},L=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},k=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},N=function(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)},a("__extends",T),a("__assign",P),a("__rest",x),a("__decorate",A),a("__param",E),a("__metadata",R),a("__awaiter",H),a("__generator",U),a("__exportStar",I),a("__createBinding",b),a("__values",m),a("__read",O),a("__spread",q),a("__spreadArrays",F),a("__spreadArray",M),a("__await",v),a("__asyncGenerator",$),a("__asyncDelegator",D),a("__asyncValues",G),a("__makeTemplateObject",C),a("__importStar",J),a("__importDefault",B),a("__classPrivateFieldGet",L),a("__classPrivateFieldSet",k),a("__classPrivateFieldIn",N)})});var W=se(V(),1),{__extends:fe,__assign:de,__rest:_e,__decorate:ye,__param:he,__metadata:pe,__awaiter:w,__generator:ve,__exportStar:me,__createBinding:be,__values:ge,__read:we,__spread:je,__spreadArrays:Oe,__spreadArray:Se,__await:Te,__asyncGenerator:Pe,__asyncDelegator:xe,__asyncValues:Ae,__makeTemplateObject:Ee,__importStar:Re,__importDefault:He,__classPrivateFieldGet:Ue,__classPrivateFieldSet:Ie,__classPrivateFieldIn:qe}=W.default;var z=({to:a},l)=>Array.isArray(a)?a.length===0||a.includes(l):a===l;var K=(a,l,f)=>chrome.runtime.onMessage.addListener((e,t,r)=>{if(console.log(`${a} received message:`,e),!z(e,a))return!1;let{type:n}=e,i=e;if(i.isReply){let s=f[n];return s?s(i,t):console.error(`[${a}] No handler for response message ${n}`),!1}let o=l[n];return o?o(e,t,r):(console.error(`[${a}] No handler for request message ${n}`),!1)});var Q=({body:a})=>{if(typeof a!="string"||!a)console.error("[background] login: invalid body",a);else{let l={active:!0,lastFocusedWindow:!0};chrome.tabs.query(l).then(([f])=>{f&&f.id&&chrome.tabs.sendMessage(f.id,{from:"background",to:"content",type:"alert",body:`logged in as ${a}`})})}return!1};var X={login:Q},Y={};K("background",X,Y);chrome.storage.onChanged.addListener(async(a,l)=>{console.warn("[chrome.storage.onChanged]",a,l)});
